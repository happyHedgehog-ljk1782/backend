<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/client/layout}"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">


<th:block layout:fragment="content">
    <script th:src="@{/client/js/withdrawalReason.js}"></script>
    <link rel="stylesheet" th:href="@{/client/css/withdrawalReason.css}">

    <!-- Summernote -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-lite.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-lite.min.js"></script>

    <section>
        <!-- 여기에 작성 -->
        <div id="main_category_route">
            <ul class="route_list">
                <li id="route_home" onclick="location.href='/'"><img th:src="@{/client/images/icon/home.png}"
                                                                     alt="메인화면"></li>
                <li>&gt;</li>
                <li id="route_mypage" onclick="location.href='/myshop/mypage'">My페이지</li>
                <li>&gt;</li>
                <li id="route_modifyInfo" onclick="location.href='/myshop/modifyInfo'">회원정보수정</li>
                <li>&gt;</li>
                <li>회원탈퇴</li>
            </ul>
            <div id="contents">
                <form action="/myshop/withdrawalReason/submit" method="post">
                    <ul id="remove_info">
                        <li>탈퇴 신청한 시점부터 1주일 뒤 아이디를 제외한 모든 개인 정보는 삭제됩니다.</li>
                        <li>그 이전에 접속하시면 탈퇴를 취소할 수 있습니다.</li>
                        <li>탈퇴 신청은 현재 비밀번호가 필요합니다.</li>
                    </ul>
                    <h1 id="question">무엇이 불편하셨나요?</h1>
                    <!-- Summernote -->
                    <div id="summernote"></div>
                    <!-- Summernote -->
                    <input type="hidden" name="summernoteContent" id="summernoteContent">

                    <div id="password_wrap">
                        <label>비밀번호</label>
                        <input type="password" name="userPwd" placeholder="현재 비밀번호를 입력해주세요." id="password_input">
                    </div>

                    <div id="bottom_buttons">
                        <input type="button" id="mypage_button" value="마이페이지" onclick="location.href='/myshop/mypage'">
                        <input type="submit" id="submit_button" value="탈퇴신청하기">
                    </div>
                </form>
            </div>
        </div>
    </section>
    <script>
        $(document).ready(function () {
            $('#summernote').summernote({
                placeholder: '탈퇴하고 싶은 이유를 작성하시면 됩니다.',
                height: 350,
                maxHeight: 1000,
                width: 700,
                maxWidth: 700,
                focus: true,
                lang: "ko-KR",
                disableDragAndDrop: true,
                dialogsInBody: true,
                callbacks: {},
                toolbar: [],
            });
            $('#summernote').summernote('code', localStorage.getItem("summernoteContent") || '');
        });
        $('#summernote').on('summernote.keyup', function () {
            const content = $(this).summernote('code');
            const maxLength = 3000;
            console.log(content.length);
            if (content.length > maxLength) {
                alert("글자수가 너무 많습니다. (3000자 이하)");
                $(this).summernote('code', content.substring(0, maxLength));
            }
        })
        $('form').submit(function () {
            $('#summernoteContent').val($('#summernote').summernote('code'))
            localStorage.setItem("summernoteContent", $('#summernote').summernote('code'));
        })
    </script>
    <script th:inline="javascript">
        var message = [[${message}]];
        if (message) {
            alert(message);
        }
    </script>
</th:block>
</html>