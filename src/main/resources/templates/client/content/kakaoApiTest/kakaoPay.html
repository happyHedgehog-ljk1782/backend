


<input type="hidden" name="pay-name" value="이현강">
<input type="hidden" name="pay-tel" value="01032620102">
<input type="hidden" name="pay-email" value="klun102w@gmail.com">
<input type="hidden" id='total-pay-price' value='10'>
<input type="hidden" id='total-price' value='100'>
<input type="hidden" id='point-use' value='50'>

<button type="submit" id="btn-kakao-pay">눌러!!!</button>
<!--</form>-->
<script>
    $(function(){
        $("#btn-kakao-pay").click(function(){

            // 필수입력값을 확인.
            var name = $("input[name='pay-name']").val();
            var tel = $("input[name='pay-tel']").val();
            var email = $("input[name='pay-email']").val();

            if(name == ""){
                $("#form-payment input[name='pay-name']").focus()
            }
            if(tel == ""){
                $("#form-payment input[name='pay-tel']").focus()
            }
            if(email == ""){
                $("#form-payment input[name='pay-email']").focus()
            }
            // 결제 정보를 form에 저장한다.
            let totalPayPrice = parseInt($("#total-pay-price").val())
            let totalPrice = parseInt($("#total-price").val())
            let discountPrice = totalPrice - totalPayPrice
            let usePoint = $("#point-use").val();

            $.ajax({
                type:'post'
                ,url:'/order/pay'
                ,data:{
                    totalPayPrice: totalPayPrice
                    ,payUserName: name
                    ,sumPrice:totalPrice
                    ,discountPrice:discountPrice
                    ,totalPrice:totalPayPrice
                    ,tel:tel
                    ,email:email
                    ,usePoint:usePoint
                },
                success:function(response){
                    location.href = response.next_redirect_pc_url
                }
            })
        })
    })
