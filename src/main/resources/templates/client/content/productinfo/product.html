<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/client/layout}"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

  <th:block layout:fragment="content">

  <link rel="stylesheet" th:href="@{/client/css/product.css}">
    <script src="https://kit.fontawesome.com/{6726f2378f}.js" crossorigin="anonymous"></script>

    <div class="top"><a th:href="@{'#'}"></a></div>

    <section>
      <div class="wrap">
        <div class="product_wrap" >
          <ul class="product_photos">
            <li class="product_main_photo">
              <img th:src="@{|/thumbPath${productDetail[0].convertPath}|}" alt="대표이미지">
            </li>
            <li>
              <div class="product_sub_photos">
                <a th:href="@{|/thumbPath${productDetail[0].convertPath}|}" title="image1"><img th:src="@{|/thumbPath${productDetail[0].convertPath}|}" alt=""></a>
                <a th:href="@{|/thumbPath${productDetail[1].convertPath}|}" title="image2"><img th:src="@{|/thumbPath${productDetail[1].convertPath}|}" alt=""></a>
                <a th:href="@{|/thumbPath${productDetail[2].convertPath}|}" title="image3"><img th:src="@{|/thumbPath${productDetail[2].convertPath}|}" alt=""></a>
                <a th:href="@{|/thumbPath${productDetail[3].convertPath}|}" title="image4"><img th:src="@{|/thumbPath${productDetail[3].convertPath}|}" alt=""></a>
              </div>
            </li>
          </ul>

          <div class="product_text">
            <div>1인가구</div>
            <h3 th:text="${productDetail[0].productText[0].productName}">평상형 수납침대</h3>
            <hr>
            <div class="product_text_wrap">
              <div class="product_price">
                <span>판매가</span>
                <span th:text="'￦'+${T(java.lang.String).format('%,d', productPrice)}"></span>
              </div>
              <div class="option" >
                <label for="color">색상</label>
                <select name="option_color" id="color">
                  <th:block th:each="option : ${productOption}">

                      <option th:text="${option}">흰색</option>
                  </th:block>

                </select>
              </div>
              <div class="info">
                <div>
                  <div>카드할인</div>
                  <p>신한카드 3/5/10만원 즉시 할인 <br>
                    삼성카드 청구할인 <br>
                    국민카드 무이자 최대 12개월</p>
                </div>
                <div>
                  <div>배송정보</div>
                  <p><span>1인가구배송</span> <br>
                    평일기준 3일이내 도착예상 <br>
                    산간지역 / 제주특별자치 상관없이 <br>
                    전부 무료배송!</p>
                </div>
              </div>
              <div class="button">
                <button type="button">장바구니</button>
                <button type="button">바로구매</button>
              </div>
            </div>
          </div>

        </div>

        <div class="point_txt_wrap">
          <ul class="review">
            <li><span>★</span>4.5 후기 3개</li>
            <li><a th:href="@{'#rivew'}">더보기 +</a></li>
          </ul>
          <ul class="review_txt">
            <li>리뷰 포인트</li>
            <li>구매 후 리뷰 작성시 최대 1,000 포인트적립</li>
          </ul>
          <div><span>♥</span>첫 구매시 무조건 10,000포인트 적립<span>♥</span></div>
        </div>

        <div class="detail_info ">
          <div>상세정보</div>
          <ul>
            <li><a th:href="@{'#rivew'}">후기(3개)</a></li>
            <li><a th:href="@{'#qa'}">Q&A</a></li>
          </ul>
        </div>

        <!-- 상세이미지 -->
        <div class="page_view">
          <img th:src="@{|/thumbPath${productDetail[4].convertPath}|}"alt="">
        </div>

        <!-- 평균리뷰 -->

        <ul class="average_review">
          <li>
            <span>★★★★★</span>
          </li>
          <li th:text="'리뷰평점 '+${productReview.get(0).getReviewAvg()}">별점없음</li>
        </ul>

        <!-- 포토후기 -->

        <div class="poto_review">
          <h2>포토 리뷰</h2>
          <ul th:onclick="openModal()">
            <li>
              <img th:src="@{/client/images/review_photo/1.png}" alt="">
            </li>
          </ul>
          <div class="review_page_number">전체보기</div>
        </div>


        <div id="overlay">
          <div id="myModal" class="modal">
            <button id="closeModal">&times;</button>
            <div class="content-container">
              <div class="left-column">
                <img th:src="@{/client/images/review_photo/1.png}" alt="후기사진">
              </div>
              <div class="right-column">
                <div class="modal_average_review">
                  <ul>
                    <li>★★★★☆</li><li>4</li>

                  </ul>
                  <ul>
                    <li>lyai** </li><li>23.12.03.</li>
                  </ul>
                </div>
                <hr>
                <div class="modal_option">
                  평상형 수납침대 : 흰색
                </div>
                <hr>
                <div class="modal_content">
                  냄새안나고 너무 예뻐요~!!! <br>
                  가격도 저렴하고 무료배송이라 늘 애용합니다 ~
                </div>
                <hr>
                <div>
                  <ul id="review-img">
                    <li><img src="/client/images/review_photo/1.png" alt=""></li>
                    <li><img src="/client/images/review_photo/2.png" alt=""></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 글 후기 -->

        <div class="text_review">
          <div>
            <h2 id="rivew">상품후기</h2>
            <ul class="text_review_list" th:each="Review : ${productReview}">
              <li th:each="number : ${#numbers.sequence(1, reviewCount)}" th:text="${number}">오류</li>
              <li><span>★★★★☆</span></li>
              <li th:text="${productReview.get(0).getReviewContent()}">내용이 안불러와 졌네요</li>
              <li th:text="${productReview.get(0).getReviewId()}">아이디</li>
              <li th:if="${productReview.get(0).getReviewWriteDate() != null}" th:text="${#strings.substring(productReview.get(0).getReviewWriteDate(), 0, 10)}">리뷰쓴날짜</li>
            </ul>
            <div class="review_page_number">1</div>
          </div>

          <!-- Q&A -->
          <h2 id="qa">Q&A</h2>
          <div class="qa">
            <ul class="main">
              <li>1</li>
              <li>배송관련</li>
              <li>배송기간은 얼마나 걸리나요?</li>
            </ul>
            <div class="sub">답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변</div>
          </div>
          <div class="qa">
            <ul class="main">
              <li>2</li>
              <li>배송관련</li>
              <li>배송기간은 얼마나 걸리나요?</li>
            </ul>
            <div class="sub">답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변답변</div>
          </div>

          <p class="nonmember">
            비회원으로 주문하신 경우 당사 사이트 우측 상단의 [배송 조회 > 비회원 주문 확인] 메뉴에서 확인 가능하며 <br>
            주문 완료 후 제공되는 주문번호 및 주문 시 기재한 이메일로 확인 가능합니다
          </p>

        </div>

      </div>
    </section>

    <script>
      $("#thumbnailArea > div").click(function(){
        const number = $(this).find("label").text();
        console.log(number);
        location.href = "/productinfo/product/" + number;
      });
    </script>


    <script th:src="@{/client/js/product.js}"></script>
  </th:block>
</html>